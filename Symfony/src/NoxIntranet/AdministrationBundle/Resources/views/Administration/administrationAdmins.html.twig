{% extends "::layout.html.twig" %}

{% block style %}
    {% stylesheets '@NoxIntranetAdministrationBundle/Resources/public/css/administration.css' %}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
    {% endstylesheets %}
{% endblock %}

{% block titrePage %}Administration Admins{% endblock %}

{% block messageAccueil %}Administration des comptes admins{% endblock %}

{% block contenu %}

    <div id="divAdministrationAdmin">

        <div class="row">
            <div class="col-lg-10 col-lg-offset-1">
                <div id="creationAdmin">
                    <div id="creationAdminDiv">
                         <form action='{{ path('nox_intranet_creation_admin') }}' >
                            
                            <label for="ajoutAdmin"> Ajouter un admin <span class='infobulle' title="Ces champs servent UNIQUEMENT à ajouter des administrateurs 'locaux'. Pour nommer un utilisateur du domaine administrateur de l'intranet, passer par la gestion des utilisateurs."><span class="gras" >local</span></span>: </label>
                            <br>
                            <div class="col-sm-3">
                                <input type="text" name='adminname' id="adminname" placeholder="Nom" />
                            </div>
                            <div class="col-sm-3">
                            <input type="password" name='adminpassword' id="adminpassword" placeholder="Mot de passe" />
                            </div>
                            <div class="col-sm-4">
                            <input type="password" name='adminpasswordcheck' id="adminpasswordcheck" placeholder="Répéter Mot de passe" />
                            </div>
                            <div class="col-sm-2">
                            <input type="submit" id="creer" name="Créer" value="Créer" class="boutonFormulaire" >
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
        </div>
                    
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1">
                <table class="table table-hover tableAdministrationAdmin">
                    <thead>
                        <tr>
                            <th> Administrateur </th>
                            <th> Local </th>
                            <th> Supprimer </th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for admin in admins %}

                        {% for role in admin.roles %}

                            {% if role == "ROLE_ADMIN" %}
                                
                                <tr>
                                    <td> <p> {{ admin.username }} <p> </td>

                                    <td>
                                        {% if admin.local %}
                                            oui
                                        {% else %}
                                            non
                                        {% endif %}
                                    </td>

                                    <td> <a href='{{ path('nox_intranet_suppression_admin', {'adminID': admin.id}) }}'> <img class="suppressionAdminImg" src='{{ asset('bundles/noxintranetadministration/images/User-Delete-32.png') }}'> </a> </td>
                                </tr>

                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
                    
        

    </div>
{% endblock %}


{# empty Twig template #}
